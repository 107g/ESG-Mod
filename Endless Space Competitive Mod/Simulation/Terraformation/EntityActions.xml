<?xml version="1.0" encoding="utf-8" ?>
<Datatable xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="../Schemas/EntityActionDefinition.xsd">
  <InitiateTerraformationEmpireActionFleetAction Name="InitiateTerraformPlanetFleetAction">

    <EntityPrerequisites Location="Self">
      <!-- Hide button if module not equipped. -->
      <InterpreterPrerequisite Flags="Discard" Inverted="false">Property(Context, NetTerraformationProduction) gt 0</InterpreterPrerequisite>

      <!-- Grey out button if technology is not owned. -->
      <InterpreterPrerequisite Flags="NeedTerraformationTechnology">Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation1') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation1TimeLords') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation1Free') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation1TimeLordsFree') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation2') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation2TimeLords') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation2Free') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation2TimeLordsFree')</InterpreterPrerequisite>

      <!-- Grey out if under enemy influence. -->
      <PathPrerequisite Flags="UnderEnemyInfluence" Inverted="true">FleetInfluenceStateHostile</PathPrerequisite>

      <!-- Grey out button if busy. -->
      <PathPrerequisite Inverted="true" Flags="FleetIsSleeping">FleetActionSleep</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="MotherShipAttached">FleetActionMothershipAttached</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionExpedition</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionColonize</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionReclaimMothership</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionGroundBattle</PathPrerequisite>
      <!--<PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionGuarding</PathPrerequisite>-->
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionPrivateer</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="IsCollectingRelics">FleetActionCollectingRelics</PathPrerequisite>
    </EntityPrerequisites>

    <EmpireLocalActionName>TerraformPlanetEmpireLocalAction</EmpireLocalActionName>

  </InitiateTerraformationEmpireActionFleetAction>

  <InitiateRestorationEmpireActionFleetAction Name="InitiateRestorePlanetFleetAction">

    <EntityPrerequisites Location="Self">
      <!-- Hide button if module not equipped. -->
      <InterpreterPrerequisite Flags="Discard" Inverted="false">Property(Context, NetRestorationProduction) gt 0</InterpreterPrerequisite>

      <!-- Grey out button if technology is not owned. -->
      <InterpreterPrerequisite Flags="NeedTerraformationTechnology">Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation1') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation1TimeLords') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation1Free') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation1TimeLordsFree') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation2') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation2TimeLords') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation2Free') or Path(Context, @'../ClassEmpire/ClassResearch,TechnologyTerraformation2TimeLordsFree')</InterpreterPrerequisite>

      <!-- Grey out if under enemy influence. -->
      <PathPrerequisite Flags="UnderEnemyInfluence" Inverted="true">FleetInfluenceStateHostile</PathPrerequisite>

      <!-- Grey out button if busy. -->
      <PathPrerequisite Inverted="true" Flags="FleetIsSleeping">FleetActionSleep</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="MotherShipAttached">FleetActionMothershipAttached</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionExpedition</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionColonize</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionReclaimMothership</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionGroundBattle</PathPrerequisite>
      <!--<PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionGuarding</PathPrerequisite>-->
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionPrivateer</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="IsCollectingRelics">FleetActionCollectingRelics</PathPrerequisite>
    </EntityPrerequisites>

    <EmpireLocalActionName>RestorePlanetEmpireLocalAction</EmpireLocalActionName>

  </InitiateRestorationEmpireActionFleetAction>
</Datatable>