<?xml version="1.0" encoding="utf-8" ?>
<Datatable xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="../Schemas/IndustryConstructibleElement.xsd">
  <!-- Denarque University -->
  <StarSystemImprovementDefinition Name="StarSystemImprovementUniqueStartingImprovement"  Category="CategoryStarSystemImprovementUnique" SubCategory="SubCategoryFIDSI" ScoreProvider="StarSystemImprovementBuilt">
    <SupervisorGain Name="Food" />
    <SupervisorGain Name="Industry" />
    <SupervisorGain Name="Science" />
    <SupervisorGain Name="Dust" />
    <SupervisorGain Name="Prestige" />
    <SupervisorGain Name="Approval" />
    <QueuedSimulationDescriptorReference Name="BuildingStarSystemImprovementUniqueStartingImprovement"/>
    <Cost ResourceName="SystemProduction">1040</Cost>
    <Cost ResourceName="Strategic1" Instant="true">5</Cost>
    <Cost ResourceName="Strategic2" Instant="true">5</Cost>
    <TechnologyPrerequisite Flags="Prerequisite,Discard">TechnologyDiplomacy1</TechnologyPrerequisite>
    <PathPrerequisite        Inverted="false"   Flags="Prerequisite,Discard">ColonizedStarSystemStateColony</PathPrerequisite>
    <PathPrerequisite        Inverted="true"    Flags="Prerequisite,Discard">ClassColonizedStarSystem/StarSystemImprovementUniqueStartingImprovement,!FastForwardedImprovement</PathPrerequisite>
    <PathPrerequisite        Inverted="true"    Flags="Prerequisite,Discard">../ClassEmpire/Uniques,StarSystemImprovementUniqueStartingImprovement</PathPrerequisite>
    <PathPrerequisite        Inverted="true"    Flags="Prerequisite,Discard,UnlockAvailability,Faction,AffinityGameplayTechnologyMajorHisshos">../ClassEmpire,AffinityGameplayMajorHisshos</PathPrerequisite>
    <InterpreterPrerequisite Inverted="true"    Flags="Prerequisite,Discard">Path(Context,@'../ClassEmpire/ClassStarSystem,BuildingStarSystemImprovementUniqueStartingImprovement') and not(Path(Context,@'ClassStarSystem,BuildingStarSystemImprovementUniqueStartingImprovement'))</InterpreterPrerequisite>
    <SimulationDescriptorReference Name="StarSystemImprovementUniqueStartingImprovement" />
    <SimulationDescriptorReference Name="StarSystemImprovementUpkeepStage3High" />
    <SimulationDescriptorReference Name="StarSystemImprovementOncePerEmpire" />
    <PopulationEvent Name="PopulationPoliticalEventBuildingConstructionDenarqueUniversity"/>
    <UniqueTags>StarSystemImprovementUniqueStartingImprovement</UniqueTags>
  </StarSystemImprovementDefinition>

  <StarSystemImprovementDefinition Name="StarSystemImprovementUniqueStartingImprovementMajorHissho"  Category="CategoryStarSystemImprovementUnique" SubCategory="SubCategoryFIDSI" ScoreProvider="StarSystemImprovementBuilt">
    <SupervisorGain Name="Food" />
    <SupervisorGain Name="Industry" />
    <SupervisorGain Name="Science" />
    <SupervisorGain Name="Dust" />
    <SupervisorGain Name="Prestige" />
    <SupervisorGain Name="Approval" />
    <QueuedSimulationDescriptorReference Name="BuildingStarSystemImprovementUniqueStartingImprovement"/>
    <Cost ResourceName="SystemProduction">1040</Cost>
    <Cost ResourceName="Strategic1" Instant="true">5</Cost>
    <Cost ResourceName="Strategic2" Instant="true">5</Cost>
    <TechnologyPrerequisite Flags="Prerequisite,Discard">TechnologyDiplomacy1</TechnologyPrerequisite>
    <PathPrerequisite        Inverted="false"   Flags="Prerequisite,Discard">ColonizedStarSystemStateColony</PathPrerequisite>
    <PathPrerequisite        Inverted="true"    Flags="Prerequisite,Discard">ClassColonizedStarSystem/StarSystemImprovementUniqueStartingImprovement,!FastForwardedImprovement</PathPrerequisite>
    <PathPrerequisite        Inverted="true"    Flags="Prerequisite,Discard">../ClassEmpire/Uniques,StarSystemImprovementUniqueStartingImprovement</PathPrerequisite>
    <PathPrerequisite        Inverted="false"   Flags="Prerequisite,Discard,UnlockAvailability,Faction,AffinityGameplayTechnologyMajorHisshos">../ClassEmpire,AffinityGameplayMajorHisshos</PathPrerequisite>
    <InterpreterPrerequisite Inverted="true"    Flags="Prerequisite,Discard">Path(Context,@'../ClassEmpire/ClassStarSystem,BuildingStarSystemImprovementUniqueStartingImprovement') and not(Path(Context,@'ClassStarSystem,BuildingStarSystemImprovementUniqueStartingImprovement'))</InterpreterPrerequisite>
    <SimulationDescriptorReference Name="StarSystemImprovementUniqueStartingImprovementMajorHissho" />
    <SimulationDescriptorReference Name="StarSystemImprovementUpkeepStage3High" />
    <SimulationDescriptorReference Name="StarSystemImprovementOncePerEmpire" />
    <PopulationEvent Name="PopulationPoliticalEventBuildingConstructionDenarqueUniversity"/>
    <UniqueTags>StarSystemImprovementUniqueStartingImprovement</UniqueTags>
  </StarSystemImprovementDefinition>

  <!-- Riftborn Tower of Temporal Paradox -->
  <StarSystemImprovementDefinition Name="StarSystemImprovementUniqueTimeLords" SubCategory="SubCategoryDust" ScoreProvider="StarSystemImprovementBuilt">
    <SupervisorGain Name="Dust"       Weight="3"  />
    <QueuedSimulationDescriptorReference Name="BuildingStarSystemImprovementUniqueTimeLords"/>
    <Cost ResourceName="SystemProduction">6240</Cost>
    <Cost ResourceName="Strategic3" Instant="true">25</Cost>
    <PathPrerequisite                           Flags="Prerequisite,Discard">ColonizedStarSystemStateColony</PathPrerequisite>
    <PathPrerequisite       Inverted="true"     Flags="Prerequisite,Discard">../ClassEmpire/Uniques,StarSystemImprovementUniqueTimeLords</PathPrerequisite>
    <PathPrerequisite       Inverted="true"     Flags="Prerequisite,Discard">ClassColonizedStarSystem/StarSystemImprovementUniqueTimeLords,!FastForwardedImprovement</PathPrerequisite>
    <InterpreterPrerequisite Inverted="true"    Flags="Prerequisite,Discard">Path(Context,@'../ClassEmpire/ClassStarSystem,BuildingStarSystemImprovementUniqueTimeLords') and not(Path(Context,@'ClassStarSystem,BuildingStarSystemImprovementUniqueTimeLords'))</InterpreterPrerequisite>
    <TechnologyPrerequisite Flags="Prerequisite,Discard,Technology">TechnologyUnique1TimeLords</TechnologyPrerequisite>
    <SimulationDescriptorReference Name="StarSystemImprovementUniqueTimeLords" />
    <SimulationDescriptorReference Name="StarSystemImprovementOncePerEmpire" />
    <SimulationDescriptorReference Name="DustBuilding" />
    <PopulationEvent Name="PopulationPoliticalEventBuildingConstructionUniqueTimelords"/>
    <UniqueTags>StarSystemImprovementUniqueTimeLords</UniqueTags>
  </StarSystemImprovementDefinition>

  <!-- Nakalim Buildings -->
  <StarSystemImprovementDefinition Name="StarSystemImprovementScience2Templars" SubCategory="SubCategoryScience" ScoreProvider="StarSystemImprovementBuilt">
    <SupervisorGain Name="Science" />
    <Cost ResourceName="SystemProduction">560</Cost>
    <PathPrerequisite       Inverted="false"    Flags="Prerequisite,Discard">ColonizedStarSystemStateColony</PathPrerequisite>
    <PathPrerequisite       Inverted="true"     Flags="Prerequisite,Discard">ClassColonizedStarSystem/StarSystemImprovementScience2Templars,!FastForwardedImprovement</PathPrerequisite>
    <PathPrerequisite Inverted="false"  Flags="Prerequisite,Discard,UnlockAvailability,Faction,AffinityGameplayTemplars">../ClassEmpire,AffinityGameplayTemplars</PathPrerequisite>
    <TechnologyPrerequisite Flags="Prerequisite,Discard,Technology">TechnologyScience2</TechnologyPrerequisite>
    <SimulationDescriptorReference Name="StarSystemImprovementScience2Templars" />
    <SimulationDescriptorReference Name="StarSystemImprovementUpkeepStage2Normal" />
    <SimulationDescriptorReference Name="IsScienceBuilding" />
    <SimulationDescriptorReference Name="ScienceConstruction" />
    <PopulationEvent Name="PopulationPoliticalEventScienceBuildingConstruction1"/>
  </StarSystemImprovementDefinition>

  <StarSystemImprovementDefinition Name="StarSystemImprovementDefense3" SubCategory="SubCategoryDefense" ScoreProvider="StarSystemImprovementBuilt">
    <SupervisorGain Name="Military" />
    <Cost ResourceName="SystemProduction">320</Cost>
    <PathPrerequisite                           Flags="Prerequisite,Discard">ColonizedStarSystemStateColony</PathPrerequisite>
    <PathPrerequisite       Inverted="true"     Flags="Prerequisite,Discard">ClassColonizedStarSystem/StarSystemImprovementDefense3,!FastForwardedImprovement</PathPrerequisite>
    <PathPrerequisite       Inverted="true"     Flags="Prerequisite,Discard">ClassColonizedStarSystem/StarSystemImprovementDefense3Unfallen,!FastForwardedImprovement</PathPrerequisite>
    <PathPrerequisite       Inverted="true"     Flags="Prerequisite,Discard">ClassColonizedStarSystem/StarSystemImprovementDefense3Templars,!FastForwardedImprovement</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Discard,UnlockAvailability,Faction" Inverted="true">../ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Discard,UnlockAvailability,Faction" Inverted="true">../ClassEmpire,AffinityGameplayTemplars</PathPrerequisite>
    <TechnologyPrerequisite Flags="Prerequisite,Discard,Technology">TechnologyWeaponModule1</TechnologyPrerequisite>
    <TechnologyPrerequisite Flags="Prerequisite,Discard,Technology" Inverted="true">TechnologyWeaponModule1Unfallen</TechnologyPrerequisite>
    <SimulationDescriptorReference Name="StarSystemImprovementDefense3" />
    <SimulationDescriptorReference Name="DefenseConstruction" />
    <SimulationDescriptorReference Name="StarSystemImprovementUpkeepStage2Weak" />
    <PopulationEvent Name="PopulationPoliticalEventBuildingConstructionDefense1"/>
  </StarSystemImprovementDefinition>

  <StarSystemImprovementDefinition Name="StarSystemImprovementDefense3Templars" SubCategory="SubCategoryDefense" ScoreProvider="StarSystemImprovementBuilt">
    <SupervisorGain Name="Military" />
    <Cost ResourceName="SystemProduction">360</Cost>
    <PathPrerequisite                           Flags="Prerequisite,Discard">ColonizedStarSystemStateColony</PathPrerequisite>
    <PathPrerequisite       Inverted="true"     Flags="Prerequisite,Discard">ClassColonizedStarSystem/StarSystemImprovementDefense3Templars,!FastForwardedImprovement</PathPrerequisite>
    <PathPrerequisite Inverted="false"  Flags="Prerequisite,Discard,UnlockAvailability,Faction,AffinityGameplayTemplars">../ClassEmpire,AffinityGameplayTemplars</PathPrerequisite>
    <TechnologyPrerequisite Flags="Prerequisite,Discard,Technology">TechnologyWeaponModule1</TechnologyPrerequisite>
    <SimulationDescriptorReference Name="StarSystemImprovementDefense3Templars" />
    <SimulationDescriptorReference Name="StarSystemImprovementUpkeepStage2Weak" />
    <SimulationDescriptorReference Name="DefenseConstruction" />
    <PopulationEvent Name="PopulationPoliticalEventBuildingConstructionDefense1"/>
  </StarSystemImprovementDefinition>
  
  <!-- Wonders -->
  <StarSystemImprovementDefinition Name="StarSystemImprovementWonder1" Category="CategoryStarSystemImprovementWonder" SubCategory="SubCategoryApproval" OncePerWorld="true" IsRefundable="true" ScoreProvider="StarSystemImprovementWonderBuilt">
    <SupervisorGain Name="Science" Weight="1"/>
    <SupervisorGain Name="Dust" Weight="1.5"/>
    <Tags>Indestructible, Eternal</Tags>
    <QueuedSimulationDescriptorReference Name="BuildingStarSystemImprovementWonder1"/>
    <CostReductionReference Name="CategoryWonderImprovement"/>

    <Cost ResourceName="SystemProduction">2340</Cost>
    <Cost ResourceName="Strategic1" Instant="true">15</Cost>
    <Cost ResourceName="Strategic2" Instant="true">15</Cost>
    <InterpreterPrerequisite Inverted="true" Flags="Prerequisite,Discard">Path(Context,@'../ClassEmpire/ClassStarSystem,BuildingStarSystemImprovementWonder1') and not(Path(Context,@'ClassStarSystem,BuildingStarSystemImprovementWonder1'))</InterpreterPrerequisite>
    <PathPrerequisite Inverted="true" Flags="Prerequisite,Discard">../ClassEmpire/Uniques,StarSystemImprovementWonder1</PathPrerequisite>
    <PathPrerequisite Inverted="true" Flags="Prerequisite,Discard">../ClassEmpire/ClassStarSystem/StarSystemImprovementWonder1</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Discard">../ClassEmpire,StarSystemImprovementUnlockedWonder1</PathPrerequisite>
    <SimulationDescriptorReference Name="StarSystemImprovementWonder1" />
    <SimulationDescriptorReference Name="StarSystemImprovementOncePerGalaxy" />
    <SimulationDescriptorReference Name="IndestructibleStarSystemImprovement" />
    <PopulationEvent Name="PopulationPoliticalEventBuildingConstructionWonderReligious"/>
    <UniqueTags>StarSystemImprovementWonder1</UniqueTags>
    <TemporaryEffect>StarSystemImprovementWonder1TemporaryEffect</TemporaryEffect>
    <TemporaryEffect>StarSystemImprovementWonder1TemporaryEffectMajorHisshos</TemporaryEffect>
  </StarSystemImprovementDefinition>

  <StarSystemImprovementDefinition Name="StarSystemImprovementWonder2" Category="CategoryStarSystemImprovementWonder" SubCategory="SubCategoryScience" OncePerWorld="true" IsRefundable="true" ScoreProvider="StarSystemImprovementWonderBuilt">
    <SupervisorGain Name="Science" Weight="2"/>
    <Tags>Indestructible, Eternal</Tags>
    <QueuedSimulationDescriptorReference Name="BuildingStarSystemImprovementWonder2"/>
    <CostReductionReference Name="CategoryWonderImprovement"/>
    <Cost ResourceName="SystemProduction">4680</Cost>
    <Cost ResourceName="Strategic3" Instant="true">15</Cost>
    <Cost ResourceName="Strategic4" Instant="true">15</Cost>
    <InterpreterPrerequisite Inverted="true" Flags="Prerequisite,Discard">Path(Context,@'../ClassEmpire/ClassStarSystem,BuildingStarSystemImprovementWonder2') and not(Path(Context,@'ClassStarSystem,BuildingStarSystemImprovementWonder2'))</InterpreterPrerequisite>
    <PathPrerequisite Inverted="true" Flags="Prerequisite,Discard">../ClassEmpire/Uniques,StarSystemImprovementWonder2</PathPrerequisite>
    <PathPrerequisite Inverted="true" Flags="Prerequisite,Discard">../ClassEmpire/ClassStarSystem/StarSystemImprovementWonder2</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Discard">../ClassEmpire,StarSystemImprovementUnlockedWonder2</PathPrerequisite>
    <SimulationDescriptorReference Name="StarSystemImprovementWonder2" />
    <SimulationDescriptorReference Name="StarSystemImprovementOncePerGalaxy" />
    <SimulationDescriptorReference Name="IndestructibleStarSystemImprovement" />
    <PopulationEvent Name="PopulationPoliticalEventBuildingConstructionWonderReligious"/>
    <UniqueTags>StarSystemImprovementWonder2</UniqueTags>
  </StarSystemImprovementDefinition>
  
  <!-- Build Population -->
  <StarSystemPopulationTransformImprovementDefinition   Name="StarSystemImprovementCreateMajorPopulation" SubCategory="SubCategoryPopulation" ScoreProvider="StarSystemImprovementBuilt"
                                                  PopulationDestination="Major"  PopulationToTransformCount="1" CreateIfNotAvailable="true">
    <AIGain RessourceName="PopulationGain" Inverted="false"></AIGain>
    <SupervisorGain Name="Industry" Weight="0.15"/>
    <SupervisorGain Name="Food"     Weight="0.15"/>
    <SupervisorGain Name="Dust"     Weight="0.15"/>
    <SupervisorGain Name="Science"  Weight="0.15"/>
    <Tags>NoBuyout</Tags>
    <QueuedSimulationDescriptorReference Name="QueuedDescriptorIncreaseVirtualPopulation"/>
    <CustomCost ResourceName="SystemProduction">(50 + Property(StockLocation,@ClassColonizedStarSystem,MajorPopulationCount) * 50) * Property(StockLocation, @../ClassEmpire, GameSpeedMultiplier, true)</CustomCost>
    <PathPrerequisite Inverted="false"   Flags="Prerequisite,Discard">ClassColonizedStarSystem</PathPrerequisite>
    <PathPrerequisite Inverted="false"   Flags="Prerequisite,Discard">../ClassEmpire,!AffinityGameplayUmbralChoir/PopulationMajor,ClassPopulationEmpireAffinityTimeLords</PathPrerequisite>
    <PathPrerequisite Inverted="true"   Flags="Prerequisite,Discard">../ClassEmpire,EmpireImprovementQuestTimeLords05</PathPrerequisite>
    <PathPrerequisite Inverted="true"   Flags="Prerequisite,Discard">../ClassEmpire,EmpireImprovementQuestTimeLords07</PathPrerequisite>
    <InterpreterPrerequisite Flags="MaximumPopulationSystem,Enqueue">(Property(Context,@ClassColonizedStarSystem, MaximumPopulation) ge (1 + Property(Context,@ClassColonizedStarSystem, Population) + Property(Context,@ClassColonizedStarSystem, VirtualPopulation)))</InterpreterPrerequisite>
    <InterpreterPrerequisite Flags="Prerequisite">(Property(Context,@ClassColonizedStarSystem, MaximumPopulation) ge (Property(Context,@ClassColonizedStarSystem, Population) + Property(Context,@ClassColonizedStarSystem, VirtualPopulation)))</InterpreterPrerequisite>
    <SimulationDescriptorReference Name="StarSystemImprovementCreateMajorPopulation"/>
    <NextUpgradeName>StarSystemImprovementQuestTimeLords05</NextUpgradeName>
    <NextUpgradeName>StarSystemImprovementQuestTimeLords07</NextUpgradeName>
  </StarSystemPopulationTransformImprovementDefinition>

  <StarSystemPopulationTransformImprovementDefinition   Name="StarSystemImprovementCreateMajorPopulationUmbralChoir" SubCategory="SubCategoryPopulation" ScoreProvider="StarSystemImprovementBuilt"
                                                    PopulationDestination="Major"  PopulationToTransformCount="1" CreateIfNotAvailable="true">
    <AIGain RessourceName="PopulationGain" Inverted="false"></AIGain>
    <SupervisorGain Name="Industry" Weight="0.15"/>
    <SupervisorGain Name="Food"     Weight="0.15"/>
    <SupervisorGain Name="Dust"     Weight="0.15"/>
    <SupervisorGain Name="Science"  Weight="0.15"/>
    <Tags>NoBuyout</Tags>
    <QueuedSimulationDescriptorReference Name="QueuedDescriptorIncreaseVirtualPopulation"/>
    <CustomCost ResourceName="SystemProduction">(50 + Property(StockLocation,@'../ClassEmpire',Population) * 50) * Property(StockLocation, @'../ClassEmpire', GameSpeedMultiplier, true)</CustomCost>
    <DownloadableContentPrerequisite>DLCUC</DownloadableContentPrerequisite>
    <PathPrerequisite Inverted="false"   Flags="Prerequisite,Discard">ClassColonizedStarSystem</PathPrerequisite>
    <PathPrerequisite Inverted="false"   Flags="Prerequisite,Discard">../ClassEmpire,AffinityGameplayUmbralChoir/PopulationMajor,ClassPopulationEmpireAffinityTimeLords</PathPrerequisite>
    <PathPrerequisite Inverted="true"   Flags="Prerequisite,Discard">../ClassEmpire,EmpireImprovementQuestTimeLords05</PathPrerequisite>
    <PathPrerequisite Inverted="true"   Flags="Prerequisite,Discard">../ClassEmpire,EmpireImprovementQuestTimeLords07</PathPrerequisite>
    <InterpreterPrerequisite Flags="MaximumPopulationSystem,Enqueue">(Property(Context,@ClassColonizedStarSystem,VirtualPopulation) + Property(Context,@'../ClassEmpire',Population)) lt (Property(Context,@'ClassColonizedStarSystem',AvailablePopulationSlotsOnGhostSystems) + Property(Context,@ClassColonizedStarSystem,MaximumPopulation))</InterpreterPrerequisite>
    <InterpreterPrerequisite Flags="Prerequisite">(Property(Context,@ClassColonizedStarSystem,VirtualPopulation) + Property(Context,@'../ClassEmpire',Population)) le (Property(Context,@'ClassColonizedStarSystem',AvailablePopulationSlotsOnGhostSystems) + Property(Context,@ClassColonizedStarSystem,MaximumPopulation))</InterpreterPrerequisite>
    <SimulationDescriptorReference Name="StarSystemImprovementCreateMajorPopulation"/>
    <NextUpgradeName>StarSystemImprovementQuestTimeLords05</NextUpgradeName>
    <NextUpgradeName>StarSystemImprovementQuestTimeLords07</NextUpgradeName>
  </StarSystemPopulationTransformImprovementDefinition>
</Datatable>